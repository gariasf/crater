import{at as S,I as V,m as C,d as k,e as h,q as g,s as x,L as q,x as z,r as i,o as b,k as B,i as r,b as c,z as p,t as _,g as e,a as l,n as N,h as D,w as L}from"./main.85eae20a.js";const j={class:"flex justify-between w-full"},E=["onSubmit"],G={class:"p-8 sm:p-6"},T={class:"z-0 flex justify-end p-4 border-t border-gray-200 border-solid border-modal-bg"},F={__name:"ItemUnitModal",setup(X){const t=S(),a=V(),{t:v}=C();let o=k(!1);const $=h(()=>({name:{required:g.withMessage(v("validation.required"),x),minLength:g.withMessage(v("validation.name_min_length",{count:3}),q(3))}})),n=z($,h(()=>t.currentItemUnit));async function U(){if(n.value.$touch(),n.value.$invalid)return!0;try{const s=t.isItemUnitEdit?t.updateItemUnit:t.addItemUnit;o.value=!0,await s(t.currentItemUnit),a.refreshData&&a.refreshData(),u(),o.value=!1}catch{return o.value=!1,!0}}function u(){a.closeModal(),setTimeout(()=>{t.currentItemUnit={id:null,name:""},a.$reset(),n.value.$reset()},300)}return(s,m)=>{const I=i("BaseIcon"),y=i("BaseInput"),w=i("BaseInputGroup"),f=i("BaseButton"),M=i("BaseModal");return b(),B(M,{show:e(a).active&&e(a).componentName==="ItemUnitModal",onClose:u},{header:r(()=>[c("div",j,[p(_(e(a).title)+" ",1),l(I,{name:"XIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:u})])]),default:r(()=>[c("form",{action:"",onSubmit:L(U,["prevent"])},[c("div",G,[l(w,{label:s.$t("settings.customization.items.unit_name"),error:e(n).name.$error&&e(n).name.$errors[0].$message,variant:"horizontal",required:""},{default:r(()=>[l(y,{modelValue:e(t).currentItemUnit.name,"onUpdate:modelValue":m[0]||(m[0]=d=>e(t).currentItemUnit.name=d),invalid:e(n).name.$error,type:"text",onInput:m[1]||(m[1]=d=>e(n).name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),c("div",T,[l(f,{type:"button",variant:"primary-outline",class:"mr-3 text-sm",onClick:u},{default:r(()=>[p(_(s.$t("general.cancel")),1)]),_:1}),l(f,{loading:e(o),disabled:e(o),variant:"primary",type:"submit"},{left:r(d=>[e(o)?D("",!0):(b(),B(I,{key:0,name:"SaveIcon",class:N(d.class)},null,8,["class"]))]),default:r(()=>[p(" "+_(e(t).isItemUnitEdit?s.$t("general.update"):s.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],40,E)]),_:1},8,["show"])}}};export{F as _};
