import{m as Y,H as F,J as X,d as h,e as E,E as it,aq as Z,ar as ot,r as d,o as S,c as C,b as r,t as v,a as t,i as u,w as L,n as M,z as D,F as G,j as lt,k as U,g as y,h as R,a8 as mt,a4 as T,K as k,q as H,ai as tt,as as et,x as st,y as j,ac as ut,at as rt,I as dt,a9 as ct}from"./main.85eae20a.js";import{D as _t,d as pt}from"./DragIcon.b05ab1c2.js";import{u as gt}from"./payment.91c0b052.js";import{_ as yt}from"./ItemUnitModal.d2820e15.js";const ft={class:"text-gray-900 text-lg font-medium"},vt={class:"mt-1 text-sm text-gray-500"},bt={class:"overflow-x-auto"},St={class:"w-full mt-6 table-fixed"},$t=r("colgroup",null,[r("col",{style:{width:"4%"}}),r("col",{style:{width:"45%"}}),r("col",{style:{width:"27%"}}),r("col",{style:{width:"24%"}})],-1),Bt=r("thead",null,[r("tr",null,[r("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"}),r("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"}," Component "),r("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"}," Parameter "),r("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"})])],-1),ht={class:"relative"},zt={class:"text-gray-300 cursor-move handle align-middle"},Vt={class:"px-5 py-4"},It={class:"block text-sm not-italic font-medium text-primary-800 whitespace-nowrap mr-2 min-w-[200px]"},xt={class:"text-xs text-gray-500 mt-1"},wt={class:"px-5 py-4 text-left align-middle"},Ct={class:"px-5 py-4 text-right align-middle pt-10"},Dt={colspan:"2",class:"px-5 py-4"},Et={class:"px-5 py-4 text-right align-middle",colspan:"2"},W={__name:"NumberCustomizer",props:{type:{type:String,required:!0},typeStore:{type:Object,required:!0},defaultSeries:{type:String,default:"INV"}},setup(z){const m=z,{t:l}=Y(),_=F(),p=X(),o=h([]),s=h(!1),i=h([{label:l("settings.customization.series"),description:l("settings.customization.series_description"),name:"SERIES",paramLabel:l("settings.customization.series_param_label"),value:m.defaultSeries,inputDisabled:!1,inputType:"text",allowMultiple:!1},{label:l("settings.customization.sequence"),description:l("settings.customization.sequence_description"),name:"SEQUENCE",paramLabel:l("settings.customization.sequence_param_label"),value:"6",inputDisabled:!1,inputType:"number",allowMultiple:!1},{label:l("settings.customization.delimiter"),description:l("settings.customization.delimiter_description"),name:"DELIMITER",paramLabel:l("settings.customization.delimiter_param_label"),value:"-",inputDisabled:!1,inputType:"text",allowMultiple:!0},{label:l("settings.customization.customer_series"),description:l("settings.customization.customer_series_description"),name:"CUSTOMER_SERIES",paramLabel:"",value:"",inputDisabled:!0,inputType:"text",allowMultiple:!1},{label:l("settings.customization.customer_sequence"),description:l("settings.customization.customer_sequence_description"),name:"CUSTOMER_SEQUENCE",paramLabel:l("settings.customization.customer_sequence_param_label"),value:"6",inputDisabled:!1,inputType:"number",allowMultiple:!1},{label:l("settings.customization.date_format"),description:l("settings.customization.date_format_description"),name:"DATE_FORMAT",paramLabel:l("settings.customization.date_format_param_label"),value:"Y",inputDisabled:!1,inputType:"text",allowMultiple:!0},{label:l("settings.customization.random_sequence"),description:l("settings.customization.random_sequence_description"),name:"RANDOM_SEQUENCE",paramLabel:l("settings.customization.random_sequence_param_label"),value:"6",inputDisabled:!1,inputType:"number",allowMultiple:!1}]),e=E(()=>i.value.filter(function(f){return!o.value.some(function(V){return f.allowMultiple?!1:f.name==V.name})})),c=h(""),a=h(!1),n=h(!1),g=E(()=>{let f="";return o.value.forEach(V=>{let q=`{{${V.name}`;V.value&&(q+=`:${V.value}`),f+=`${q}}}`}),f});it(o,f=>{N()}),$();async function $(){let f={format:_.selectedCompanySettings[`${m.type}_number_format`]};n.value=!0,(await p.fetchPlaceholders(f)).data.placeholders.forEach(q=>{var P;let Q=i.value.find(K=>K.name===q.name);const O=(P=q.value)!=null?P:"";o.value.push({...Q,value:O,id:Z.raw()})}),n.value=!1,N()}function w(f){return o.value.find(V=>V.name===f.name)}function B(f){w(f)&&!f.allowMultiple||(o.value.push({...f,id:Z.raw()}),N())}function b(f){o.value=o.value.filter(function(V){return f.id!==V.id})}function x(f,V){switch(V.name){case"SERIES":f.length>=6&&(f=f.substring(0,6));break;case"DELIMITER":f.length>=1&&(f=f.substring(0,1));break}setTimeout(()=>{V.value=f,N()},100)}const N=ot(()=>{J()},500);async function J(){if(!g.value){c.value="";return}let f={key:m.type,format:g.value};a.value=!0;let V=await m.typeStore.getNextNumber(f);a.value=!1,V.data&&(c.value=V.data.nextNumber)}async function at(){if(a.value||n.value)return;s.value=!0;let f={settings:{}};return f.settings[m.type+"_number_format"]=g.value,await _.updateCompanySettings({data:f,message:`settings.customization.${m.type}s.${m.type}_settings_updated`}),s.value=!1,!0}return(f,V)=>{const q=d("BaseInput"),Q=d("BaseInputGroup"),O=d("BaseIcon"),P=d("BaseButton"),K=d("BaseDropdownItem"),nt=d("BaseDropdown");return S(),C(G,null,[r("h6",ft,v(f.$t(`settings.customization.${z.type}s.${z.type}_number_format`)),1),r("p",vt,v(f.$t(`settings.customization.${z.type}s.${z.type}_number_format_description`)),1),r("div",bt,[r("table",St,[$t,Bt,t(y(pt),{modelValue:o.value,"onUpdate:modelValue":V[1]||(V[1]=I=>o.value=I),class:"divide-y divide-gray-200","item-key":"id",tag:"tbody",handle:".handle",filter:".ignore-element"},{item:u(({element:I})=>[r("tr",ht,[r("td",zt,[t(_t)]),r("td",Vt,[r("label",It,v(I.label),1),r("p",xt,v(I.description),1)]),r("td",wt,[t(Q,{label:I.paramLabel,class:"lg:col-span-3",required:""},{default:u(()=>[t(q,{modelValue:I.value,"onUpdate:modelValue":[A=>I.value=A,A=>x(A,I)],disabled:I.inputDisabled,type:I.inputType},null,8,["modelValue","onUpdate:modelValue","disabled","type"])]),_:2},1032,["label"])]),r("td",Ct,[t(P,{variant:"white",onClick:L(A=>b(I),["prevent"])},{left:u(A=>[t(O,{name:"XIcon",class:M(["!sm:m-0",A.class])},null,8,["class"])]),default:u(()=>[D(" Remove ")]),_:2},1032,["onClick"])])])]),footer:u(()=>[r("tr",null,[r("td",Dt,[t(Q,{label:f.$t(`settings.customization.${z.type}s.preview_${z.type}_number`)},{default:u(()=>[t(q,{modelValue:c.value,"onUpdate:modelValue":V[0]||(V[0]=I=>c.value=I),disabled:"",loading:a.value},null,8,["modelValue","loading"])]),_:1},8,["label"])]),r("td",Et,[t(nt,{"wrapper-class":"flex items-center justify-end mt-5"},{activator:u(()=>[t(P,{variant:"primary-outline"},{left:u(I=>[t(O,{class:M(I.class),name:"PlusIcon"},null,8,["class"])]),default:u(()=>[D(" "+v(f.$t("settings.customization.add_new_component")),1)]),_:1})]),default:u(()=>[(S(!0),C(G,null,lt(y(e),I=>(S(),U(K,{key:I.label,onClick:L(A=>B(I),["prevent"])},{default:u(()=>[D(v(I.label),1)]),_:2},1032,["onClick"]))),128))]),_:1})])])]),_:1},8,["modelValue"])])]),t(P,{loading:s.value,disabled:s.value,variant:"primary",type:"submit",class:"mt-4",onClick:at},{left:u(I=>[s.value?R("",!0):(S(),U(O,{key:0,class:M(I.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+v(f.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],64)}}},Ut={__name:"InvoicesTabInvoiceNumber",setup(z){const m=mt();return(l,_)=>(S(),U(W,{type:"invoice","type-store":y(m),"default-series":"INV"},null,8,["type-store"]))}},Ft={class:"text-gray-900 text-lg font-medium"},Tt={class:"mt-1 text-sm text-gray-500"},kt={__name:"InvoicesTabRetrospective",setup(z){const{t:m,tm:l}=Y(),_=F(),p=X(),o=T("utils"),s=k({retrospective_edits:null});o.mergeSettings(s,{..._.selectedCompanySettings}),E(()=>p.config.retrospective_edits.map(e=>(e.title=m(e.key),e)));async function i(){let e={settings:{...s}};return await _.updateCompanySettings({data:e,message:"settings.customization.invoices.invoice_settings_updated"}),!0}return(e,c)=>{const a=d("BaseRadio"),n=d("BaseInputGroup");return S(),C(G,null,[r("h6",Ft,v(e.$tc("settings.customization.invoices.retrospective_edits")),1),r("p",Tt,v(e.$t("settings.customization.invoices.retrospective_edits_description")),1),t(n,{required:""},{default:u(()=>[t(a,{id:"allow",modelValue:s.retrospective_edits,"onUpdate:modelValue":[c[0]||(c[0]=g=>s.retrospective_edits=g),i],label:e.$t("settings.customization.invoices.allow"),size:"sm",name:"filter",value:"allow",class:"mt-2"},null,8,["modelValue","label"]),t(a,{id:"disable_on_invoice_partial_paid",modelValue:s.retrospective_edits,"onUpdate:modelValue":[c[1]||(c[1]=g=>s.retrospective_edits=g),i],label:e.$t("settings.customization.invoices.disable_on_invoice_partial_paid"),size:"sm",name:"filter",value:"disable_on_invoice_partial_paid",class:"mt-2"},null,8,["modelValue","label"]),t(a,{id:"disable_on_invoice_paid",modelValue:s.retrospective_edits,"onUpdate:modelValue":[c[2]||(c[2]=g=>s.retrospective_edits=g),i],label:e.$t("settings.customization.invoices.disable_on_invoice_paid"),size:"sm",name:"filter",value:"disable_on_invoice_paid",class:"my-2"},null,8,["modelValue","label"]),t(a,{id:"disable_on_invoice_sent",modelValue:s.retrospective_edits,"onUpdate:modelValue":[c[3]||(c[3]=g=>s.retrospective_edits=g),i],label:e.$t("settings.customization.invoices.disable_on_invoice_sent"),size:"sm",name:"filter",value:"disable_on_invoice_sent"},null,8,["modelValue","label"])]),_:1})],64)}}},Nt=["onSubmit"],Mt={class:"text-gray-900 text-lg font-medium"},qt={class:"mt-1 text-sm text-gray-500 mb-2"},Gt={class:"w-full sm:w-1/2 md:w-1/4 lg:w-1/5"},Rt={__name:"InvoicesTabDueDate",setup(z){const{t:m}=Y(),l=F(),_=T("utils");let p=h(!1);const o=k({invoice_set_due_date_automatically:null,invoice_due_date_days:null});_.mergeSettings(o,{...l.selectedCompanySettings});const s=E({get:()=>o.invoice_set_due_date_automatically==="YES",set:async a=>{const n=a?"YES":"NO";o.invoice_set_due_date_automatically=n}}),i=E(()=>({dueDateSettings:{invoice_due_date_days:{required:H.withMessage(m("validation.required"),tt(s.value)),numeric:H.withMessage(m("validation.numbers_only"),et)}}})),e=st(i,{dueDateSettings:o});async function c(){if(e.value.dueDateSettings.$touch(),e.value.dueDateSettings.$invalid)return!1;p.value=!0;let a={settings:{...o}};return s.value||delete a.settings.invoice_due_date_days,await l.updateCompanySettings({data:a,message:"settings.customization.invoices.invoice_settings_updated"}),p.value=!1,!0}return(a,n)=>{const g=d("BaseSwitchSection"),$=d("BaseInput"),w=d("BaseInputGroup"),B=d("BaseIcon"),b=d("BaseButton");return S(),C("form",{onSubmit:L(c,["prevent"])},[r("h6",Mt,v(a.$t("settings.customization.invoices.due_date")),1),r("p",qt,v(a.$t("settings.customization.invoices.due_date_description")),1),t(g,{modelValue:y(s),"onUpdate:modelValue":n[0]||(n[0]=x=>j(s)?s.value=x:null),title:a.$t("settings.customization.invoices.set_due_date_automatically"),description:a.$t("settings.customization.invoices.set_due_date_automatically_description")},null,8,["modelValue","title","description"]),y(s)?(S(),U(w,{key:0,label:a.$t("settings.customization.invoices.due_date_days"),error:y(e).dueDateSettings.invoice_due_date_days.$error&&y(e).dueDateSettings.invoice_due_date_days.$errors[0].$message,class:"mt-2 mb-4"},{default:u(()=>[r("div",Gt,[t($,{modelValue:o.invoice_due_date_days,"onUpdate:modelValue":n[1]||(n[1]=x=>o.invoice_due_date_days=x),invalid:y(e).dueDateSettings.invoice_due_date_days.$error,type:"number",onInput:n[2]||(n[2]=x=>y(e).dueDateSettings.invoice_due_date_days.$touch())},null,8,["modelValue","invalid"])])]),_:1},8,["label","error"])):R("",!0),t(b,{loading:y(p),disabled:y(p),variant:"primary",type:"submit",class:"mt-4"},{left:u(x=>[y(p)?R("",!0):(S(),U(B,{key:0,class:M(x.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+v(a.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,Nt)}}},At=["onSubmit"],Lt={class:"text-gray-900 text-lg font-medium"},Pt={class:"mt-1 text-sm text-gray-500 mb-2"},Yt={__name:"InvoicesTabDefaultFormats",setup(z){const m=F(),l=T("utils"),_=h(["customer","customerCustom","invoice","invoiceCustom","company"]),p=h(["billing","customer","customerCustom","invoiceCustom"]),o=h(["shipping","customer","customerCustom","invoiceCustom"]),s=h(["company","invoiceCustom"]);let i=h(!1);const e=k({invoice_mail_body:null,invoice_company_address_format:null,invoice_shipping_address_format:null,invoice_billing_address_format:null});l.mergeSettings(e,{...m.selectedCompanySettings});async function c(){i.value=!0;let a={settings:{...e}};return await m.updateCompanySettings({data:a,message:"settings.customization.invoices.invoice_settings_updated"}),i.value=!1,!0}return(a,n)=>{const g=d("BaseCustomInput"),$=d("BaseInputGroup"),w=d("BaseIcon"),B=d("BaseButton");return S(),C("form",{onSubmit:L(c,["prevent"])},[r("h6",Lt,v(a.$t("settings.customization.invoices.default_formats")),1),r("p",Pt,v(a.$t("settings.customization.invoices.default_formats_description")),1),t($,{label:a.$t("settings.customization.invoices.default_invoice_email_body"),class:"mt-6 mb-4"},{default:u(()=>[t(g,{modelValue:e.invoice_mail_body,"onUpdate:modelValue":n[0]||(n[0]=b=>e.invoice_mail_body=b),fields:_.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.invoices.company_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(g,{modelValue:e.invoice_company_address_format,"onUpdate:modelValue":n[1]||(n[1]=b=>e.invoice_company_address_format=b),fields:s.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.invoices.shipping_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(g,{modelValue:e.invoice_shipping_address_format,"onUpdate:modelValue":n[2]||(n[2]=b=>e.invoice_shipping_address_format=b),fields:o.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.invoices.billing_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(g,{modelValue:e.invoice_billing_address_format,"onUpdate:modelValue":n[3]||(n[3]=b=>e.invoice_billing_address_format=b),fields:p.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(B,{loading:y(i),disabled:y(i),variant:"primary",type:"submit",class:"mt-4"},{left:u(b=>[y(i)?R("",!0):(S(),U(w,{key:0,class:M(b.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+v(a.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,At)}}},Ot={class:"divide-y divide-gray-200"},jt={__name:"InvoicesTab",setup(z){const m=T("utils"),l=F(),_=k({invoice_email_attachment:null});m.mergeSettings(_,{...l.selectedCompanySettings});const p=E({get:()=>_.invoice_email_attachment==="YES",set:async o=>{const s=o?"YES":"NO";let i={settings:{invoice_email_attachment:s}};_.invoice_email_attachment=s,await l.updateCompanySettings({data:i,message:"general.setting_updated"})}});return(o,s)=>{const i=d("BaseDivider"),e=d("BaseSwitchSection");return S(),C(G,null,[t(Ut),t(i,{class:"my-8"}),t(Rt),t(i,{class:"my-8"}),t(kt),t(i,{class:"my-8"}),t(Yt),t(i,{class:"mt-6 mb-2"}),r("ul",Ot,[t(e,{modelValue:y(p),"onUpdate:modelValue":s[0]||(s[0]=c=>j(p)?p.value=c:null),title:o.$t("settings.customization.invoices.invoice_email_attachment"),description:o.$t("settings.customization.invoices.invoice_email_attachment_setting_description")},null,8,["modelValue","title","description"])])],64)}}},Qt={__name:"EstimatesTabEstimateNumber",setup(z){const m=ut();return(l,_)=>(S(),U(W,{type:"estimate","type-store":y(m),"default-series":"EST"},null,8,["type-store"]))}},Ht=["onSubmit"],Jt={class:"text-gray-900 text-lg font-medium"},Kt={class:"mt-1 text-sm text-gray-500 mb-2"},Xt={class:"w-full sm:w-1/2 md:w-1/4 lg:w-1/5"},Wt={__name:"EstimatesTabExpiryDate",setup(z){const{t:m}=Y(),l=F(),_=T("utils");let p=h(!1);const o=k({estimate_set_expiry_date_automatically:null,estimate_expiry_date_days:null});_.mergeSettings(o,{...l.selectedCompanySettings});const s=E({get:()=>o.estimate_set_expiry_date_automatically==="YES",set:async a=>{const n=a?"YES":"NO";o.estimate_set_expiry_date_automatically=n}}),i=E(()=>({expiryDateSettings:{estimate_expiry_date_days:{required:H.withMessage(m("validation.required"),tt(s.value)),numeric:H.withMessage(m("validation.numbers_only"),et)}}})),e=st(i,{expiryDateSettings:o});async function c(){if(e.value.expiryDateSettings.$touch(),e.value.expiryDateSettings.$invalid)return!1;p.value=!0;let a={settings:{...o}};return s.value||delete a.settings.estimate_expiry_date_days,await l.updateCompanySettings({data:a,message:"settings.customization.estimates.estimate_settings_updated"}),p.value=!1,!0}return(a,n)=>{const g=d("BaseSwitchSection"),$=d("BaseInput"),w=d("BaseInputGroup"),B=d("BaseIcon"),b=d("BaseButton");return S(),C("form",{onSubmit:L(c,["prevent"])},[r("h6",Jt,v(a.$t("settings.customization.estimates.expiry_date")),1),r("p",Kt,v(a.$t("settings.customization.estimates.expiry_date_description")),1),t(g,{modelValue:y(s),"onUpdate:modelValue":n[0]||(n[0]=x=>j(s)?s.value=x:null),title:a.$t("settings.customization.estimates.set_expiry_date_automatically"),description:a.$t("settings.customization.estimates.set_expiry_date_automatically_description")},null,8,["modelValue","title","description"]),y(s)?(S(),U(w,{key:0,label:a.$t("settings.customization.estimates.expiry_date_days"),error:y(e).expiryDateSettings.estimate_expiry_date_days.$error&&y(e).expiryDateSettings.estimate_expiry_date_days.$errors[0].$message,class:"mt-2 mb-4"},{default:u(()=>[r("div",Xt,[t($,{modelValue:o.estimate_expiry_date_days,"onUpdate:modelValue":n[1]||(n[1]=x=>o.estimate_expiry_date_days=x),invalid:y(e).expiryDateSettings.estimate_expiry_date_days.$error,type:"number",onInput:n[2]||(n[2]=x=>y(e).expiryDateSettings.estimate_expiry_date_days.$touch())},null,8,["modelValue","invalid"])])]),_:1},8,["label","error"])):R("",!0),t(b,{loading:y(p),disabled:y(p),variant:"primary",type:"submit",class:"mt-4"},{left:u(x=>[y(p)?R("",!0):(S(),U(B,{key:0,class:M(x.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+v(a.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,Ht)}}},Zt=["onSubmit"],te={class:"text-gray-900 text-lg font-medium"},ee={class:"mt-1 text-sm text-gray-500 mb-2"},se={__name:"EstimatesTabDefaultFormats",setup(z){const m=F(),l=T("utils"),_=h(["customer","customerCustom","estimate","estimateCustom","company"]),p=h(["billing","customer","customerCustom","estimateCustom"]),o=h(["shipping","customer","customerCustom","estimateCustom"]),s=h(["company","estimateCustom"]);let i=h(!1);const e=k({estimate_mail_body:null,estimate_company_address_format:null,estimate_shipping_address_format:null,estimate_billing_address_format:null});l.mergeSettings(e,{...m.selectedCompanySettings});async function c(){i.value=!0;let a={settings:{...e}};return await m.updateCompanySettings({data:a,message:"settings.customization.estimates.estimate_settings_updated"}),i.value=!1,!0}return(a,n)=>{const g=d("BaseCustomInput"),$=d("BaseInputGroup"),w=d("BaseIcon"),B=d("BaseButton");return S(),C("form",{onSubmit:L(c,["prevent"])},[r("h6",te,v(a.$t("settings.customization.estimates.default_formats")),1),r("p",ee,v(a.$t("settings.customization.estimates.default_formats_description")),1),t($,{label:a.$t("settings.customization.estimates.default_estimate_email_body"),class:"mt-6 mb-4"},{default:u(()=>[t(g,{modelValue:e.estimate_mail_body,"onUpdate:modelValue":n[0]||(n[0]=b=>e.estimate_mail_body=b),fields:_.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.estimates.company_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(g,{modelValue:e.estimate_company_address_format,"onUpdate:modelValue":n[1]||(n[1]=b=>e.estimate_company_address_format=b),fields:s.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.estimates.shipping_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(g,{modelValue:e.estimate_shipping_address_format,"onUpdate:modelValue":n[2]||(n[2]=b=>e.estimate_shipping_address_format=b),fields:o.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.estimates.billing_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(g,{modelValue:e.estimate_billing_address_format,"onUpdate:modelValue":n[3]||(n[3]=b=>e.estimate_billing_address_format=b),fields:p.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(B,{loading:y(i),disabled:y(i),variant:"primary",type:"submit",class:"mt-4"},{left:u(b=>[y(i)?R("",!0):(S(),U(w,{key:0,class:M(b.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+v(a.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,Zt)}}},ae={class:"text-gray-900 text-lg font-medium"},ne={class:"mt-1 text-sm text-gray-500"},ie={__name:"EstimatesTabConvertEstimate",setup(z){const{t:m,tm:l}=Y(),_=F(),p=X(),o=T("utils"),s=k({estimate_convert_action:null});o.mergeSettings(s,{..._.selectedCompanySettings}),E(()=>p.config.estimate_convert_action.map(e=>(e.title=m(e.key),e)));async function i(){let e={settings:{...s}};return await _.updateCompanySettings({data:e,message:"settings.customization.estimates.estimate_settings_updated"}),!0}return(e,c)=>{const a=d("BaseRadio"),n=d("BaseInputGroup");return S(),C(G,null,[r("h6",ae,v(e.$tc("settings.customization.estimates.convert_estimate_options")),1),r("p",ne,v(e.$t("settings.customization.estimates.convert_estimate_description")),1),t(n,{required:""},{default:u(()=>[t(a,{id:"no_action",modelValue:s.estimate_convert_action,"onUpdate:modelValue":[c[0]||(c[0]=g=>s.estimate_convert_action=g),i],label:e.$t("settings.customization.estimates.no_action"),size:"sm",name:"filter",value:"no_action",class:"mt-2"},null,8,["modelValue","label"]),t(a,{id:"delete_estimate",modelValue:s.estimate_convert_action,"onUpdate:modelValue":[c[1]||(c[1]=g=>s.estimate_convert_action=g),i],label:e.$t("settings.customization.estimates.delete_estimate"),size:"sm",name:"filter",value:"delete_estimate",class:"my-2"},null,8,["modelValue","label"]),t(a,{id:"mark_estimate_as_accepted",modelValue:s.estimate_convert_action,"onUpdate:modelValue":[c[2]||(c[2]=g=>s.estimate_convert_action=g),i],label:e.$t("settings.customization.estimates.mark_estimate_as_accepted"),size:"sm",name:"filter",value:"mark_estimate_as_accepted"},null,8,["modelValue","label"])]),_:1})],64)}}},oe={class:"divide-y divide-gray-200"},le={__name:"EstimatesTab",setup(z){const m=T("utils"),l=F(),_=k({estimate_email_attachment:null});m.mergeSettings(_,{...l.selectedCompanySettings});const p=E({get:()=>_.estimate_email_attachment==="YES",set:async o=>{const s=o?"YES":"NO";let i={settings:{estimate_email_attachment:s}};_.estimate_email_attachment=s,await l.updateCompanySettings({data:i,message:"general.setting_updated"})}});return(o,s)=>{const i=d("BaseDivider"),e=d("BaseSwitchSection");return S(),C(G,null,[t(Qt),t(i,{class:"my-8"}),t(Wt),t(i,{class:"my-8"}),t(ie),t(i,{class:"my-8"}),t(se),t(i,{class:"mt-6 mb-2"}),r("ul",oe,[t(e,{modelValue:y(p),"onUpdate:modelValue":s[0]||(s[0]=c=>j(p)?p.value=c:null),title:o.$t("settings.customization.estimates.estimate_email_attachment"),description:o.$t("settings.customization.estimates.estimate_email_attachment_setting_description")},null,8,["modelValue","title","description"])])],64)}}},me={__name:"PaymentsTabPaymentNumber",setup(z){const m=gt();return(l,_)=>(S(),U(W,{type:"payment","type-store":y(m),"default-series":"PAY"},null,8,["type-store"]))}},ue=["onSubmit"],re={class:"text-gray-900 text-lg font-medium"},de={class:"mt-1 text-sm text-gray-500 mb-2"},ce={__name:"PaymentsTabDefaultFormats",setup(z){const m=F(),l=T("utils"),_=h(["customer","customerCustom","company","payment","paymentCustom"]),p=h(["billing","customer","customerCustom","paymentCustom"]),o=h(["company","paymentCustom"]);let s=h(!1);const i=k({payment_mail_body:null,payment_company_address_format:null,payment_from_customer_address_format:null});l.mergeSettings(i,{...m.selectedCompanySettings});async function e(){s.value=!0;let c={settings:{...i}};return await m.updateCompanySettings({data:c,message:"settings.customization.payments.payment_settings_updated"}),s.value=!1,!0}return(c,a)=>{const n=d("BaseCustomInput"),g=d("BaseInputGroup"),$=d("BaseIcon"),w=d("BaseButton");return S(),C("form",{onSubmit:L(e,["prevent"])},[r("h6",re,v(c.$t("settings.customization.payments.default_formats")),1),r("p",de,v(c.$t("settings.customization.payments.default_formats_description")),1),t(g,{label:c.$t("settings.customization.payments.default_payment_email_body"),class:"mt-6 mb-4"},{default:u(()=>[t(n,{modelValue:i.payment_mail_body,"onUpdate:modelValue":a[0]||(a[0]=B=>i.payment_mail_body=B),fields:_.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(g,{label:c.$t("settings.customization.payments.company_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(n,{modelValue:i.payment_company_address_format,"onUpdate:modelValue":a[1]||(a[1]=B=>i.payment_company_address_format=B),fields:o.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(g,{label:c.$t("settings.customization.payments.from_customer_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(n,{modelValue:i.payment_from_customer_address_format,"onUpdate:modelValue":a[2]||(a[2]=B=>i.payment_from_customer_address_format=B),fields:p.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(w,{loading:y(s),disabled:y(s),variant:"primary",type:"submit",class:"mt-4"},{left:u(B=>[y(s)?R("",!0):(S(),U($,{key:0,class:M(B.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+v(c.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,ue)}}},_e={class:"divide-y divide-gray-200"},pe={__name:"PaymentsTab",setup(z){const m=T("utils"),l=F(),_=k({payment_email_attachment:null});m.mergeSettings(_,{...l.selectedCompanySettings});const p=E({get:()=>_.payment_email_attachment==="YES",set:async o=>{const s=o?"YES":"NO";let i={settings:{payment_email_attachment:s}};_.payment_email_attachment=s,await l.updateCompanySettings({data:i,message:"general.setting_updated"})}});return(o,s)=>{const i=d("BaseDivider"),e=d("BaseSwitchSection");return S(),C(G,null,[t(me),t(i,{class:"my-8"}),t(ce),t(i,{class:"mt-6 mb-2"}),r("ul",_e,[t(e,{modelValue:y(p),"onUpdate:modelValue":s[0]||(s[0]=c=>j(p)?p.value=c:null),title:o.$t("settings.customization.payments.payment_email_attachment"),description:o.$t("settings.customization.payments.payment_email_attachment_setting_description")},null,8,["modelValue","title","description"])])],64)}}},ge={class:"flex flex-wrap justify-end mt-2 lg:flex-nowrap"},ye={class:"inline-block"},fe={__name:"ItemsTab",setup(z){const{t:m}=Y(),l=h(null),_=rt(),p=dt(),o=ct(),s=E(()=>[{key:"name",label:m("settings.customization.items.unit_name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]);async function i({page:n,filter:g,sort:$}){let w={orderByField:$.fieldName||"created_at",orderBy:$.order||"desc",page:n},B=await _.fetchItemUnits(w);return{data:B.data.data,pagination:{totalPages:B.data.meta.last_page,currentPage:n,totalCount:B.data.meta.total,limit:5}}}async function e(){p.openModal({title:m("settings.customization.items.add_item_unit"),componentName:"ItemUnitModal",refreshData:l.value.refresh,size:"sm"})}async function c(n){_.fetchItemUnit(n.data.id),p.openModal({title:m("settings.customization.items.edit_item_unit"),componentName:"ItemUnitModal",id:n.data.id,data:n.data,refreshData:l.value&&l.value.refresh})}function a(n){o.openDialog({title:m("general.are_you_sure"),message:m("settings.customization.items.item_unit_confirm_delete"),yesLabel:m("general.yes"),noLabel:m("general.no"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async g=>{g&&(await _.deleteItemUnit(n.data.id),l.value&&l.value.refresh())})}return(n,g)=>{const $=d("BaseIcon"),w=d("BaseButton"),B=d("BaseDropdownItem"),b=d("BaseDropdown"),x=d("BaseTable");return S(),C(G,null,[t(yt),r("div",ge,[t(w,{variant:"primary-outline",onClick:e},{left:u(N=>[t($,{class:M(N.class),name:"PlusIcon"},null,8,["class"])]),default:u(()=>[D(" "+v(n.$t("settings.customization.items.add_item_unit")),1)]),_:1})]),t(x,{ref_key:"table",ref:l,class:"mt-10",data:i,columns:y(s)},{"cell-actions":u(({row:N})=>[t(b,null,{activator:u(()=>[r("div",ye,[t($,{name:"DotsHorizontalIcon",class:"text-gray-500"})])]),default:u(()=>[t(B,{onClick:J=>c(N)},{default:u(()=>[t($,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),D(" "+v(n.$t("general.edit")),1)]),_:2},1032,["onClick"]),t(B,{onClick:J=>a(N)},{default:u(()=>[t($,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),D(" "+v(n.$t("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["columns"])],64)}}},ve={class:"relative"},he={__name:"CustomizationSetting",setup(z){return(m,l)=>{const _=d("BaseTab"),p=d("BaseTabGroup"),o=d("BaseCard");return S(),C("div",ve,[t(o,{"container-class":"px-4 py-5 sm:px-8 sm:py-2"},{default:u(()=>[t(p,null,{default:u(()=>[t(_,{"tab-panel-container":"py-4 mt-px",title:m.$t("settings.customization.invoices.title")},{default:u(()=>[t(jt)]),_:1},8,["title"]),t(_,{"tab-panel-container":"py-4 mt-px",title:m.$t("settings.customization.estimates.title")},{default:u(()=>[t(le)]),_:1},8,["title"]),t(_,{"tab-panel-container":"py-4 mt-px",title:m.$t("settings.customization.payments.title")},{default:u(()=>[t(pe)]),_:1},8,["title"]),t(_,{"tab-panel-container":"py-4 mt-px",title:m.$t("settings.customization.items.title")},{default:u(()=>[t(fe)]),_:1},8,["title"])]),_:1})]),_:1})])}}};export{he as default};
