import{a9 as k,u as C,m as I,M as T,N as x,I as M,a4 as E,r as c,o as m,k as p,i as t,g as l,a as r,R as S,z as v,t as z,h as D,d as O,e as F,c as P,n as j,F as G,K as V}from"./main.85eae20a.js";import{u as A,_ as H}from"./NoteModal.570a3dbe.js";import"./payment.91c0b052.js";const L={__name:"NoteIndexDropdown",props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(_){const u=_,h=k(),g=C(),{t:a}=I(),o=A(),B=T(),y=x(),b=M();E("utils");function w(n){o.fetchNote(n),b.openModal({title:a("settings.customization.notes.edit_note"),componentName:"NoteModal",size:"md",refreshData:u.loadData})}function s(n){h.openDialog({title:a("general.are_you_sure"),message:a("settings.customization.notes.note_confirm_delete"),yesLabel:a("general.yes"),noLabel:a("general.no"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async()=>{(await o.deleteNote(n)).data.success?g.showNotification({type:"success",message:a("settings.customization.notes.deleted_message")}):g.showNotification({type:"error",message:a("settings.customization.notes.already_in_use")}),u.loadData&&u.loadData()})}return(n,e)=>{const i=c("BaseIcon"),d=c("BaseButton"),N=c("BaseDropdownItem"),f=c("BaseDropdown");return m(),p(f,null,{activator:t(()=>[l(B).name==="notes.view"?(m(),p(d,{key:0,variant:"primary"},{default:t(()=>[r(i,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(m(),p(i,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:t(()=>[l(y).hasAbilities(l(S).MANAGE_NOTE)?(m(),p(N,{key:0,onClick:e[0]||(e[0]=$=>w(_.row.id))},{default:t(()=>[r(i,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),v(" "+z(n.$t("general.edit")),1)]),_:1})):D("",!0),l(y).hasAbilities(l(S).MANAGE_NOTE)?(m(),p(N,{key:1,onClick:e[1]||(e[1]=$=>s(_.row.id))},{default:t(()=>[r(i,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),v(" "+z(n.$t("general.delete")),1)]),_:1})):D("",!0)]),_:1})}}},q={__name:"NotesSetting",setup(_){const{t:u}=I(),h=M();k();const g=A();C();const a=x(),o=O(""),B=F(()=>[{key:"name",label:u("settings.customization.notes.name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"type",label:u("settings.customization.notes.type"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]);async function y({page:s,filter:n,sort:e}){let i=V({orderByField:e.fieldName||"created_at",orderBy:e.order||"desc",page:s}),d=await g.fetchNotes(i);return{data:d.data.data,pagination:{totalPages:d.data.meta.last_page,currentPage:s,totalCount:d.data.meta.total,limit:5}}}async function b(){await h.openModal({title:u("settings.customization.notes.add_note"),componentName:"NoteModal",size:"md",refreshData:o.value&&o.value.refresh})}async function w(){o.value&&o.value.refresh()}return(s,n)=>{const e=c("BaseIcon"),i=c("BaseButton"),d=c("BaseTable"),N=c("BaseSettingCard");return m(),P(G,null,[r(H),r(N,{title:s.$t("settings.customization.notes.title"),description:s.$t("settings.customization.notes.description")},{action:t(()=>[l(a).hasAbilities(l(S).MANAGE_NOTE)?(m(),p(i,{key:0,variant:"primary-outline",onClick:b},{left:t(f=>[r(e,{class:j(f.class),name:"PlusIcon"},null,8,["class"])]),default:t(()=>[v(" "+z(s.$t("settings.customization.notes.add_note")),1)]),_:1})):D("",!0)]),default:t(()=>[r(d,{ref_key:"table",ref:o,data:y,columns:l(B),class:"mt-14"},{"cell-actions":t(({row:f})=>[r(L,{row:f.data,table:o.value,"load-data":w},null,8,["row","table"])]),_:1},8,["columns"])]),_:1},8,["title","description"])],64)}}};export{q as default};
