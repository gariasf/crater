import{I as k,m as q,d as L,e as g,q as y,s as N,L as D,ak as G,x as T,r as i,o as B,k as b,i as r,b as m,z as C,t as _,g as e,a as n,n as z,h as j,w as E}from"./main.85eae20a.js";import{u as U}from"./category.66e6c9de.js";const A={class:"flex justify-between w-full"},X=["onSubmit"],F={class:"p-8 sm:p-6"},H={class:"z-0 flex justify-end p-4 border-t border-gray-200 border-solid border-modal-bg"},P={__name:"CategoryModal",setup(J){const t=U(),u=k(),{t:p}=q();let d=L(!1);const h=g(()=>({currentCategory:{name:{required:y.withMessage(p("validation.required"),N),minLength:y.withMessage(p("validation.name_min_length",{count:3}),D(3))},description:{maxLength:y.withMessage(p("validation.description_maxlength",{count:255}),G(255))}}})),a=T(h,g(()=>t)),I=g(()=>u.active&&u.componentName==="CategoryModal");async function w(){if(a.value.currentCategory.$touch(),a.value.currentCategory.$invalid)return!0;const s=t.isEdit?t.updateCategory:t.addCategory;d.value=!0,await s(t.currentCategory),d.value=!1,u.refreshData&&u.refreshData(),c()}function c(){u.closeModal(),setTimeout(()=>{t.$reset(),a.value.$reset()},300)}return(s,o)=>{const f=i("BaseIcon"),x=i("BaseInput"),v=i("BaseInputGroup"),M=i("BaseTextarea"),V=i("BaseInputGrid"),$=i("BaseButton"),S=i("BaseModal");return B(),b(S,{show:e(I),onClose:c},{header:r(()=>[m("div",A,[C(_(e(u).title)+" ",1),n(f,{name:"XIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:c})])]),default:r(()=>[m("form",{action:"",onSubmit:E(w,["prevent"])},[m("div",F,[n(V,{layout:"one-column"},{default:r(()=>[n(v,{label:s.$t("expenses.category"),error:e(a).currentCategory.name.$error&&e(a).currentCategory.name.$errors[0].$message,required:""},{default:r(()=>[n(x,{modelValue:e(t).currentCategory.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e(t).currentCategory.name=l),invalid:e(a).currentCategory.name.$error,type:"text",onInput:o[1]||(o[1]=l=>e(a).currentCategory.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(v,{label:s.$t("expenses.description"),error:e(a).currentCategory.description.$error&&e(a).currentCategory.description.$errors[0].$message},{default:r(()=>[n(M,{modelValue:e(t).currentCategory.description,"onUpdate:modelValue":o[2]||(o[2]=l=>e(t).currentCategory.description=l),rows:"4",cols:"50",onInput:o[3]||(o[3]=l=>e(a).currentCategory.description.$touch())},null,8,["modelValue"])]),_:1},8,["label","error"])]),_:1})]),m("div",H,[n($,{type:"button",variant:"primary-outline",class:"mr-3 text-sm",onClick:c},{default:r(()=>[C(_(s.$t("general.cancel")),1)]),_:1}),n($,{loading:e(d),disabled:e(d),variant:"primary",type:"submit"},{left:r(l=>[e(d)?j("",!0):(B(),b(f,{key:0,name:"SaveIcon",class:z(l.class)},null,8,["class"]))]),default:r(()=>[C(" "+_(e(t).isEdit?s.$t("general.update"):s.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],40,X)]),_:1},8,["show"])}}};export{P as _};
